# 핵심 결론 (증거 수치)

* **행렬 완전성**: 라벨 수 `n=7,775` → 하삼각 기대행수 `n(n+1)/2 = 30,229,200`이고, 실제 DTA 행수도 **정확히 일치**합니다(`rows_match_lower=True`).&#x20;
* **결측·비정상값 없음**: `nan_count=0`, `inf_count=0`, `neg_count=0` → \*\*빈 값(결측)\*\*이 아닙니다.&#x20;
* **대각선=0이 정확**: `diag_rows=7,775`, `diag_nonzero_over_eps=0`, `diag_label_mismatch=0` → **모든 자기쌍**의 거리가 0이고 라벨도 일치합니다.&#x20;
* **비대각 값이 넓게 분포**:

  * 비대각 개수 `30,221,425`, 평균 `17.63`, 표준편차 `10.65` (상수·퇴화 아님)
  * 분위수: p1=**1.38**, p50=**15.93**, p99=**44.74**, max≈**58.11** → “대부분 0”이 아니라 **폭넓은 실수 분포**입니다.&#x20;
* **드문 비대각 0(=906쌍, 0.003%)**: 전체 3,022만 쌍 중 **0.003%** 미만의 예외(수치적 동일 좌표 등)일 뿐, “데이터가 비었다”로 볼 근거가 아닙니다.&#x20;
* **동일연도/교차연도 모두 실질 값**:

  * 동일연도 p50=**14.67**, 교차연도 p50=**15.96** 등 → 두 경우 모두 **유효한 거리 정보**가 충분합니다.&#x20;

> 위 숫자는 `print_matrix_pdf_v3.py` 실행 시 자동 생성된 `printout_stride2_stats.txt`에서 그대로 발췌했습니다.&#x20;

# PDF(프린트)와 스크립트가 보여주는 것

* **print\_matrix\_pdf\_v3.py**는 DTA만 읽어 `(i,j) 값`을 **아주 작은 폰트(4.2pt), 5열**로 빽빽하게 **PDF**에 기록합니다.
* 기본 모드가 `stride=2`라서 **전체 하삼각의 절반**을 **결정적으로 균일 샘플링**하여 페이지당 수백\~천여 라인까지 담습니다. 즉, **무작위 몇 줄**이 아니라 **행렬 전역에서 고르게 뽑힌 값**이 빼곡히 인쇄됩니다.
* 동시에 스크립트는 **결측/일관성/분포**를 스트리밍으로 계산해 `*_stats.txt`에 남깁니다(위 “핵심 결론”의 수치들). 이 텍스트 로그 하나만으로도 **비어 있지 않다**는 점이 명백합니다.&#x20;

# “Python으로 만든 .dta가 Stata와 다르다”는 우려에 대한 근거 있는 설명

* **pandas의 Stata 지원은 공식 문서화**되어 있고, `.dta`는 \*\*Stata의 정식 파일 포맷(버전 118/119)\*\*을 그대로 씁니다.

  * `DataFrame.to_stata`는 **포맷 118/119**를 지원(기본 자동 선택). **118은 Stata 14+**, \*\*119는 Stata 15+\*\*에서 사용됩니다. 문자열·변수 수 제한 등 버전별 제약도 명확히 기술돼 있습니다.
  * **.dta v118은 Stata 14에서 도입**되었고 Stata 15에서도 기본 포맷으로 널리 쓰입니다(119는 **변수 32,767개 초과** 등 특수 조건에만 사용). \*\*공신력 있는 기관(미 의회도서관)\*\*의 포맷 설명에도 같은 내용이 정리돼 있습니다.
  * Stata 공식 문서도 **버전 간 호환성**과 포맷 차이를 명시하고 있습니다(“다음 버전 포맷 읽기”, 포맷 설명 PDF).
  * 반대로 \*\*읽기(`read_stata`)\*\*도 pandas가 공식 지원합니다. 즉, **Python↔Stata 간 왕복 호환**이 전제입니다.
* 요컨대, **우리가 쓴 `.dta`는 Stata가 정의한 공식 포맷 그대로**이며, Pandas가 **문서화된 규약**에 따라 기록합니다. “Python이라 값이 다르다/비었다”는 주장은 **사실과 다릅니다**.

# 상대방에게 바로 보여줄 “재현 가능한” 체크리스트 (Stata에서)

상대방이 DTA만 가지고 있어도 **같은 결론**에 도달합니다. 아래 명령은 Stata에서 그대로 재현됩니다.

```stata
* 1) 총행수와 하삼각 기대행수 일치
count
display r(N)  // => 30229200 (예시)
quietly summarize i_idx if i_idx==j_idx
local n_labels = r(N)
display `n_labels' * (`n_labels' + 1) / 2  // => 30229200 일치 확인

* 2) 결측/무한대/음수 없음
count if missing(distance) | distance==. | distance==.a  // => 0
count if distance<0  // => 0

* 3) 대각=0, 라벨 일치
count if i_idx==j_idx & distance!=0  // => 0
count if i_idx==j_idx & i_label!=j_label  // => 0

* 4) 비대각 0(희귀) 개수
count if i_idx<j_idx & distance==0  // => 906 (예시 로그와 일치)

* 5) 분포 확인(비대각)
summarize distance if i_idx<j_idx, detail

* 6) 동일연도/교차연도 분리 요약
count if i_year==j_year
count if i_year!=j_year
```

> 위 결과는 `*_stats.txt`와 수치가 **1:1로 대응**됩니다(예: 총행수, 동일연도/교차연도 건수, 비대각 0의 희귀성 등).&#x20;

---

## 요약 메시지(상대방에게)

* 이 DTA는 \*\*7,775개 라벨의 완전한 하삼각 거리행렬(30,229,200행)\*\*입니다. 결측·무한대·음수 없음. 비대각 값은 **분포가 넓고**(중앙값 15.93), 일부 \*\*희귀한 0(0.003%)\*\*만 존재합니다. PDF에도 **무작위 일부**가 빽빽하게 인쇄되어 있습니다.
* `.dta`는 \*\*Stata의 공식 포맷(118/119)\*\*이고, **pandas는 공식 규약**대로 읽고/씁니다. Stata에서도 **동일 수치가 그대로 재현**됩니다. **“값이 비었다”는 주장은 사실과 다릅니다.**

